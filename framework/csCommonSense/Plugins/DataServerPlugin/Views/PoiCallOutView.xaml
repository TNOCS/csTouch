<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:cal="http://www.caliburnproject.org"
             xmlns:viewModels="clr-namespace:csDataServerPlugin.ViewModels"
             xmlns:wpfConverters="clr-namespace:WpfConverters"
             xmlns:pivotControl1="clr-namespace:csCommon.csMapCustomControls.PivotControl"
             xmlns:Custom="http://schemas.microsoft.com/surface/2008"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             xmlns:views="clr-namespace:csDataServerPlugin.Views"
             xmlns:mapCallOut="clr-namespace:csShared.Controls.Popups.MapCallOut"
             x:Class="csDataServerPlugin.Views.PoiCallOutView"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance {x:Type viewModels:PoiCallOutViewModel}}">
    <UserControl.Resources>
        <DataTemplate x:Key="DefaultDataTemplate">
            <ContentControl cal:View.Model="{Binding}"
                            HorizontalAlignment="Stretch"
                            MinHeight="150"
                            HorizontalContentAlignment="Stretch"
                            Margin="0,-1,0,1" />
        </DataTemplate>
        <SolidColorBrush x:Key="DisabledForegroundBrush"
                         Color="#888" />
        <SolidColorBrush x:Key="DisabledBorderBrush"
                         Color="#AAA" />

        <Style x:Key="PivotControlStyle1"
               TargetType="{x:Type pivotControl1:PivotControl}">
            <Setter Property="SnapsToDevicePixels"
                    Value="True" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type pivotControl1:PivotControl}">
                        <Grid KeyboardNavigation.TabNavigation="Local">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <ScrollViewer VerticalScrollBarVisibility="Hidden"
                                          HorizontalScrollBarVisibility="Hidden"
                                          Grid.Row="0">
                                <TabPanel x:Name="HeaderPanel"
                                          Panel.ZIndex="1"
                                          Margin="0,0,4,-1"
                                          IsItemsHost="True"
                                          KeyboardNavigation.TabIndex="1"
                                          Background="Transparent" />
                            </ScrollViewer>
                            <Border x:Name="Border"
                                    Grid.Row="1"
                                    Background="{TemplateBinding Background}"
                                    BorderThickness="0"
                                    CornerRadius="2"
                                    KeyboardNavigation.TabNavigation="Local"
                                    KeyboardNavigation.DirectionalNavigation="Contained"
                                    KeyboardNavigation.TabIndex="2">
                                <Custom:SurfaceScrollViewer HorizontalScrollBarVisibility="Disabled"
                                                            VerticalScrollBarVisibility="Auto"
                                                            Style="{DynamicResource SurfaceScrollViewerStyle1}">
                                    <ContentPresenter x:Name="PART_SelectedContentHost"
                                                      Margin="4"
                                                      HorizontalAlignment="Stretch"
                                                      ContentSource="SelectedContent" />
                                </Custom:SurfaceScrollViewer>
                                <!--ContentTemplate="{StaticResource SwipeTemplate}"-->
                                <!--<controls:TransitioningContentControl Name="PART_SelectedContentHost"
                                              Margin="4" Content="{TemplateBinding SelectedContent}" />-->
                                <!--<ContentPresenter Name="PART_SelectedContentHost"
                                              Margin="4"
                                              Content="SelectedContent" />-->
                                <!--<ContentPresenter.Resources>
                                    <DataTemplate DataType="{x:Type local:PivotItem}">
                                        <Grid />
                                    </DataTemplate>
                                </ContentPresenter.Resources>-->

                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled"
                                     Value="False">
                                <Setter Property="Foreground"
                                        Value="{StaticResource DisabledForegroundBrush}" />
                                <Setter TargetName="Border"
                                        Property="BorderBrush"
                                        Value="{StaticResource DisabledBorderBrush}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SurfaceScrollViewerStyle1"
               TargetType="{x:Type Custom:SurfaceScrollViewer}">
            <Setter Property="Elasticity"
                    Value="0.4,0.4" />
            <Setter Property="HorizontalScrollBarVisibility"
                    Value="Auto" />
            <Setter Property="VerticalScrollBarVisibility"
                    Value="Auto" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Custom:SurfaceScrollViewer}">
                        <Grid Background="{TemplateBinding Background}"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Stretch">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Border x:Name="PART_ElasticBorder"
                                    Background="{TemplateBinding Background}">
                                <ScrollContentPresenter CanContentScroll="{TemplateBinding CanContentScroll}"
                                                        CanHorizontallyScroll="False"
                                                        Grid.ColumnSpan="1"
                                                        CanVerticallyScroll="False"
                                                        ContentTemplate="{TemplateBinding ContentTemplate}"
                                                        Content="{TemplateBinding Content}"
                                                        Grid.Column="0"
                                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                        Margin="-1"
                                                        Grid.Row="0"
                                                        Grid.RowSpan="1" />
                            </Border>
                            <Custom:SurfaceScrollBar x:Name="PART_HorizontalScrollBar"
                                                     AutomationProperties.AutomationId="HorizontalScrollBar"
                                                     Grid.Column="0"
                                                     Foreground="{x:Null}"
                                                     HorizontalAlignment="Stretch"
                                                     HorizontalContentAlignment="Stretch"
                                                     Height="Auto"
                                                     ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                     LargeChange="1"
                                                     Maximum="{TemplateBinding ScrollableWidth}"
                                                     Minimum="0"
                                                     Orientation="Horizontal"
                                                     Grid.Row="1"
                                                     Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                                                     Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                     ViewportSize="{TemplateBinding ViewportWidth}"
                                                     VerticalContentAlignment="Stretch">
                                <Custom:SurfaceScrollBar.Style>
                                    <Style TargetType="{x:Type Custom:SurfaceScrollBar}">
                                        <Style.Resources>
                                            <system:Double x:Key="{x:Static SystemParameters.VerticalScrollBarButtonHeightKey}">38</system:Double>
                                            <system:Double x:Key="{x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}">38</system:Double>
                                        </Style.Resources>
                                        <Setter Property="Stylus.IsPressAndHoldEnabled"
                                                Value="False" />
                                        <Setter Property="Stylus.IsFlicksEnabled"
                                                Value="False" />
                                        <Setter Property="Width"
                                                Value="38" />
                                        <Setter Property="Height"
                                                Value="Auto" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type Custom:SurfaceScrollBar}">
                                                    <Grid x:Name="GridRoot"
                                                          Background="{TemplateBinding Background}">
                                                        <Border x:Name="Track"
                                                                HorizontalAlignment="Stretch"
                                                                VerticalAlignment="Stretch">
                                                            <Track x:Name="PART_Track"
                                                                   IsDirectionReversed="True">
                                                                <Track.DecreaseRepeatButton>
                                                                    <Custom:SurfaceRepeatButton x:Name="DecreaseRepeat"
                                                                                                Background="{TemplateBinding Background}"
                                                                                                Command="ScrollBar.PageUpCommand"
                                                                                                HorizontalAlignment="Center">
                                                                        <Custom:SurfaceRepeatButton.Style>
                                                                            <Style TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                <Setter Property="Interval"
                                                                                        Value="150" />
                                                                                <Setter Property="BorderBrush"
                                                                                        Value="{x:Null}" />
                                                                                <Setter Property="Background"
                                                                                        Value="Transparent" />
                                                                                <Setter Property="OverridesDefaultStyle"
                                                                                        Value="True" />
                                                                                <Setter Property="Focusable"
                                                                                        Value="False" />
                                                                                <Setter Property="IsTabStop"
                                                                                        Value="False" />
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                            <Grid Background="{TemplateBinding Background}"
                                                                                                  Width="40">
                                                                                                <Rectangle x:Name="Line"
                                                                                                           Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                           HorizontalAlignment="Center"
                                                                                                           MinWidth="2" />
                                                                                            </Grid>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <Trigger Property="IsEnabled"
                                                                                                         Value="False">
                                                                                                    <Setter Property="Fill"
                                                                                                            TargetName="Line"
                                                                                                            Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </Custom:SurfaceRepeatButton.Style>
                                                                    </Custom:SurfaceRepeatButton>
                                                                </Track.DecreaseRepeatButton>
                                                                <Track.IncreaseRepeatButton>
                                                                    <Custom:SurfaceRepeatButton x:Name="IncreaseRepeat"
                                                                                                Background="{TemplateBinding Background}"
                                                                                                Command="ScrollBar.PageDownCommand"
                                                                                                HorizontalAlignment="Center">
                                                                        <Custom:SurfaceRepeatButton.Style>
                                                                            <Style TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                <Setter Property="Interval"
                                                                                        Value="150" />
                                                                                <Setter Property="BorderBrush"
                                                                                        Value="{x:Null}" />
                                                                                <Setter Property="Background"
                                                                                        Value="Transparent" />
                                                                                <Setter Property="OverridesDefaultStyle"
                                                                                        Value="True" />
                                                                                <Setter Property="Focusable"
                                                                                        Value="False" />
                                                                                <Setter Property="IsTabStop"
                                                                                        Value="False" />
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                            <Grid Background="{TemplateBinding Background}"
                                                                                                  Width="40">
                                                                                                <Rectangle x:Name="Line"
                                                                                                           Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                           HorizontalAlignment="Center"
                                                                                                           MinWidth="2" />
                                                                                            </Grid>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <Trigger Property="IsEnabled"
                                                                                                         Value="False">
                                                                                                    <Setter Property="Fill"
                                                                                                            TargetName="Line"
                                                                                                            Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </Custom:SurfaceRepeatButton.Style>
                                                                    </Custom:SurfaceRepeatButton>
                                                                </Track.IncreaseRepeatButton>
                                                                <Track.Thumb>
                                                                    <Custom:SurfaceThumb x:Name="Thumb"
                                                                                         Background="{TemplateBinding Background}"
                                                                                         HorizontalAlignment="Center">
                                                                        <Custom:SurfaceThumb.Style>
                                                                            <Style TargetType="{x:Type Custom:SurfaceThumb}">
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type Custom:SurfaceThumb}">
                                                                                            <ControlTemplate.Resources>
                                                                                                <Storyboard x:Key="Touch">
                                                                                                    <DoubleAnimation Duration="0:0:0.05"
                                                                                                                     To="16"
                                                                                                                     Storyboard.TargetProperty="Width"
                                                                                                                     Storyboard.TargetName="Thumb" />
                                                                                                    <ThicknessAnimation Duration="0:0:0.05"
                                                                                                                        To="-1,0"
                                                                                                                        Storyboard.TargetProperty="Margin"
                                                                                                                        Storyboard.TargetName="Thumb" />
                                                                                                </Storyboard>
                                                                                                <Storyboard x:Key="Release">
                                                                                                    <DoubleAnimation Duration="0:0:0.1"
                                                                                                                     To="14"
                                                                                                                     Storyboard.TargetProperty="Width"
                                                                                                                     Storyboard.TargetName="Thumb" />
                                                                                                    <ThicknessAnimation Duration="0:0:0.1"
                                                                                                                        To="0"
                                                                                                                        Storyboard.TargetProperty="Margin"
                                                                                                                        Storyboard.TargetName="Thumb" />
                                                                                                </Storyboard>
                                                                                            </ControlTemplate.Resources>
                                                                                            <Grid x:Name="Grid"
                                                                                                  Background="{TemplateBinding Background}"
                                                                                                  SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                                                                                                <Rectangle x:Name="Thumb"
                                                                                                           Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                           HorizontalAlignment="Stretch"
                                                                                                           Height="Auto"
                                                                                                           VerticalAlignment="Stretch"
                                                                                                           Width="14" />
                                                                                            </Grid>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <Trigger Property="Custom:TouchExtensions.AreAnyInputDevicesCapturedWithin"
                                                                                                         Value="True">
                                                                                                    <Trigger.EnterActions>
                                                                                                        <BeginStoryboard>
                                                                                                            <Storyboard>
                                                                                                                <DoubleAnimation Duration="0:0:0.05"
                                                                                                                                 To="16"
                                                                                                                                 Storyboard.TargetProperty="Width"
                                                                                                                                 Storyboard.TargetName="Thumb" />
                                                                                                                <ThicknessAnimation Duration="0:0:0.05"
                                                                                                                                    To="-1,0"
                                                                                                                                    Storyboard.TargetProperty="Margin"
                                                                                                                                    Storyboard.TargetName="Thumb" />
                                                                                                            </Storyboard>
                                                                                                        </BeginStoryboard>
                                                                                                    </Trigger.EnterActions>
                                                                                                    <Trigger.ExitActions>
                                                                                                        <BeginStoryboard>
                                                                                                            <Storyboard>
                                                                                                                <DoubleAnimation Duration="0:0:0.1"
                                                                                                                                 To="14"
                                                                                                                                 Storyboard.TargetProperty="Width"
                                                                                                                                 Storyboard.TargetName="Thumb" />
                                                                                                                <ThicknessAnimation Duration="0:0:0.1"
                                                                                                                                    To="0"
                                                                                                                                    Storyboard.TargetProperty="Margin"
                                                                                                                                    Storyboard.TargetName="Thumb" />
                                                                                                            </Storyboard>
                                                                                                        </BeginStoryboard>
                                                                                                    </Trigger.ExitActions>
                                                                                                </Trigger>
                                                                                                <Trigger Property="IsEnabled"
                                                                                                         Value="False">
                                                                                                    <Setter Property="Fill"
                                                                                                            TargetName="Thumb"
                                                                                                            Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                                <Style.BasedOn>
                                                                                    <Style TargetType="{x:Type Control}">
                                                                                        <Setter Property="SnapsToDevicePixels"
                                                                                                Value="False" />
                                                                                        <Setter Property="Background"
                                                                                                Value="Transparent" />
                                                                                        <Setter Property="IsTabStop"
                                                                                                Value="False" />
                                                                                        <Setter Property="Focusable"
                                                                                                Value="False" />
                                                                                        <Setter Property="FocusVisualStyle"
                                                                                                Value="{x:Null}" />
                                                                                        <Setter Property="MinWidth"
                                                                                                Value="40" />
                                                                                        <Setter Property="MinHeight"
                                                                                                Value="40" />
                                                                                    </Style>
                                                                                </Style.BasedOn>
                                                                            </Style>
                                                                        </Custom:SurfaceThumb.Style>
                                                                    </Custom:SurfaceThumb>
                                                                </Track.Thumb>
                                                            </Track>
                                                        </Border>
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsEnabled"
                                                                 Value="False">
                                                            <Setter Property="IsEnabled"
                                                                    TargetName="PART_Track"
                                                                    Value="False" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.BasedOn>
                                            <Style TargetType="{x:Type Control}">
                                                <Setter Property="SnapsToDevicePixels"
                                                        Value="False" />
                                                <Setter Property="Background"
                                                        Value="Transparent" />
                                                <Setter Property="IsTabStop"
                                                        Value="False" />
                                                <Setter Property="Focusable"
                                                        Value="False" />
                                                <Setter Property="FocusVisualStyle"
                                                        Value="{x:Null}" />
                                                <Setter Property="MinWidth"
                                                        Value="40" />
                                                <Setter Property="MinHeight"
                                                        Value="40" />
                                            </Style>
                                        </Style.BasedOn>
                                        <Style.Triggers>
                                            <Trigger Property="Orientation"
                                                     Value="Horizontal">
                                                <Setter Property="Width"
                                                        Value="Auto" />
                                                <Setter Property="Height"
                                                        Value="38" />
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="{x:Type Custom:SurfaceScrollBar}">
                                                            <Grid x:Name="GridRoot"
                                                                  Background="{TemplateBinding Background}">
                                                                <Border x:Name="Track"
                                                                        HorizontalAlignment="Stretch"
                                                                        VerticalAlignment="Stretch">
                                                                    <Track x:Name="PART_Track">
                                                                        <Track.DecreaseRepeatButton>
                                                                            <Custom:SurfaceRepeatButton x:Name="DecreaseRepeat"
                                                                                                        Background="{TemplateBinding Background}"
                                                                                                        Command="ScrollBar.PageLeftCommand"
                                                                                                        VerticalAlignment="Center">
                                                                                <Custom:SurfaceRepeatButton.Style>
                                                                                    <Style TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                        <Setter Property="Interval"
                                                                                                Value="150" />
                                                                                        <Setter Property="BorderBrush"
                                                                                                Value="{x:Null}" />
                                                                                        <Setter Property="Background"
                                                                                                Value="Transparent" />
                                                                                        <Setter Property="OverridesDefaultStyle"
                                                                                                Value="True" />
                                                                                        <Setter Property="Focusable"
                                                                                                Value="False" />
                                                                                        <Setter Property="IsTabStop"
                                                                                                Value="False" />
                                                                                        <Setter Property="Template">
                                                                                            <Setter.Value>
                                                                                                <ControlTemplate TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                                    <Grid Background="{TemplateBinding Background}"
                                                                                                          Height="40">
                                                                                                        <Rectangle x:Name="Line"
                                                                                                                   Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                                   MinHeight="2"
                                                                                                                   VerticalAlignment="Center" />
                                                                                                    </Grid>
                                                                                                    <ControlTemplate.Triggers>
                                                                                                        <Trigger Property="IsEnabled"
                                                                                                                 Value="False">
                                                                                                            <Setter Property="Fill"
                                                                                                                    TargetName="Line"
                                                                                                                    Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                        </Trigger>
                                                                                                    </ControlTemplate.Triggers>
                                                                                                </ControlTemplate>
                                                                                            </Setter.Value>
                                                                                        </Setter>
                                                                                    </Style>
                                                                                </Custom:SurfaceRepeatButton.Style>
                                                                            </Custom:SurfaceRepeatButton>
                                                                        </Track.DecreaseRepeatButton>
                                                                        <Track.IncreaseRepeatButton>
                                                                            <Custom:SurfaceRepeatButton x:Name="IncreaseRepeat"
                                                                                                        Background="{TemplateBinding Background}"
                                                                                                        Command="ScrollBar.PageRightCommand"
                                                                                                        VerticalAlignment="Center">
                                                                                <Custom:SurfaceRepeatButton.Style>
                                                                                    <Style TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                        <Setter Property="Interval"
                                                                                                Value="150" />
                                                                                        <Setter Property="BorderBrush"
                                                                                                Value="{x:Null}" />
                                                                                        <Setter Property="Background"
                                                                                                Value="Transparent" />
                                                                                        <Setter Property="OverridesDefaultStyle"
                                                                                                Value="True" />
                                                                                        <Setter Property="Focusable"
                                                                                                Value="False" />
                                                                                        <Setter Property="IsTabStop"
                                                                                                Value="False" />
                                                                                        <Setter Property="Template">
                                                                                            <Setter.Value>
                                                                                                <ControlTemplate TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                                    <Grid Background="{TemplateBinding Background}"
                                                                                                          Height="40">
                                                                                                        <Rectangle x:Name="Line"
                                                                                                                   Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                                   MinHeight="2"
                                                                                                                   VerticalAlignment="Center" />
                                                                                                    </Grid>
                                                                                                    <ControlTemplate.Triggers>
                                                                                                        <Trigger Property="IsEnabled"
                                                                                                                 Value="False">
                                                                                                            <Setter Property="Fill"
                                                                                                                    TargetName="Line"
                                                                                                                    Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                        </Trigger>
                                                                                                    </ControlTemplate.Triggers>
                                                                                                </ControlTemplate>
                                                                                            </Setter.Value>
                                                                                        </Setter>
                                                                                    </Style>
                                                                                </Custom:SurfaceRepeatButton.Style>
                                                                            </Custom:SurfaceRepeatButton>
                                                                        </Track.IncreaseRepeatButton>
                                                                        <Track.Thumb>
                                                                            <Custom:SurfaceThumb x:Name="Thumb"
                                                                                                 Background="{TemplateBinding Background}"
                                                                                                 VerticalAlignment="Center">
                                                                                <Custom:SurfaceThumb.Style>
                                                                                    <Style TargetType="{x:Type Custom:SurfaceThumb}">
                                                                                        <Setter Property="Template">
                                                                                            <Setter.Value>
                                                                                                <ControlTemplate TargetType="{x:Type Custom:SurfaceThumb}">
                                                                                                    <ControlTemplate.Resources>
                                                                                                        <Storyboard x:Key="Touch">
                                                                                                            <DoubleAnimation Duration="0:0:0.05"
                                                                                                                             To="16"
                                                                                                                             Storyboard.TargetProperty="Height"
                                                                                                                             Storyboard.TargetName="Thumb" />
                                                                                                            <ThicknessAnimation Duration="0:0:0.05"
                                                                                                                                To="0,-1"
                                                                                                                                Storyboard.TargetProperty="Margin"
                                                                                                                                Storyboard.TargetName="Thumb" />
                                                                                                        </Storyboard>
                                                                                                        <Storyboard x:Key="Release">
                                                                                                            <DoubleAnimation Duration="0:0:0.1"
                                                                                                                             To="14"
                                                                                                                             Storyboard.TargetProperty="Height"
                                                                                                                             Storyboard.TargetName="Thumb" />
                                                                                                            <ThicknessAnimation Duration="0:0:0.1"
                                                                                                                                To="0"
                                                                                                                                Storyboard.TargetProperty="Margin"
                                                                                                                                Storyboard.TargetName="Thumb" />
                                                                                                        </Storyboard>
                                                                                                    </ControlTemplate.Resources>
                                                                                                    <Grid x:Name="Grid"
                                                                                                          Background="{TemplateBinding Background}"
                                                                                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                                                                                                        <Rectangle x:Name="Thumb"
                                                                                                                   Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                                   HorizontalAlignment="Stretch"
                                                                                                                   Height="14"
                                                                                                                   VerticalAlignment="Stretch"
                                                                                                                   Width="Auto" />
                                                                                                    </Grid>
                                                                                                    <ControlTemplate.Triggers>
                                                                                                        <Trigger Property="Custom:TouchExtensions.AreAnyInputDevicesCapturedWithin"
                                                                                                                 Value="True">
                                                                                                            <Trigger.EnterActions>
                                                                                                                <BeginStoryboard>
                                                                                                                    <Storyboard>
                                                                                                                        <DoubleAnimation Duration="0:0:0.05"
                                                                                                                                         To="16"
                                                                                                                                         Storyboard.TargetProperty="Height"
                                                                                                                                         Storyboard.TargetName="Thumb" />
                                                                                                                        <ThicknessAnimation Duration="0:0:0.05"
                                                                                                                                            To="0,-1"
                                                                                                                                            Storyboard.TargetProperty="Margin"
                                                                                                                                            Storyboard.TargetName="Thumb" />
                                                                                                                    </Storyboard>
                                                                                                                </BeginStoryboard>
                                                                                                            </Trigger.EnterActions>
                                                                                                            <Trigger.ExitActions>
                                                                                                                <BeginStoryboard>
                                                                                                                    <Storyboard>
                                                                                                                        <DoubleAnimation Duration="0:0:0.1"
                                                                                                                                         To="14"
                                                                                                                                         Storyboard.TargetProperty="Height"
                                                                                                                                         Storyboard.TargetName="Thumb" />
                                                                                                                        <ThicknessAnimation Duration="0:0:0.1"
                                                                                                                                            To="0"
                                                                                                                                            Storyboard.TargetProperty="Margin"
                                                                                                                                            Storyboard.TargetName="Thumb" />
                                                                                                                    </Storyboard>
                                                                                                                </BeginStoryboard>
                                                                                                            </Trigger.ExitActions>
                                                                                                        </Trigger>
                                                                                                        <Trigger Property="IsEnabled"
                                                                                                                 Value="False">
                                                                                                            <Setter Property="Fill"
                                                                                                                    TargetName="Thumb"
                                                                                                                    Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                        </Trigger>
                                                                                                    </ControlTemplate.Triggers>
                                                                                                </ControlTemplate>
                                                                                            </Setter.Value>
                                                                                        </Setter>
                                                                                        <Style.BasedOn>
                                                                                            <Style TargetType="{x:Type Control}">
                                                                                                <Setter Property="SnapsToDevicePixels"
                                                                                                        Value="False" />
                                                                                                <Setter Property="Background"
                                                                                                        Value="Transparent" />
                                                                                                <Setter Property="IsTabStop"
                                                                                                        Value="False" />
                                                                                                <Setter Property="Focusable"
                                                                                                        Value="False" />
                                                                                                <Setter Property="FocusVisualStyle"
                                                                                                        Value="{x:Null}" />
                                                                                                <Setter Property="MinWidth"
                                                                                                        Value="40" />
                                                                                                <Setter Property="MinHeight"
                                                                                                        Value="40" />
                                                                                            </Style>
                                                                                        </Style.BasedOn>
                                                                                    </Style>
                                                                                </Custom:SurfaceThumb.Style>
                                                                            </Custom:SurfaceThumb>
                                                                        </Track.Thumb>
                                                                    </Track>
                                                                </Border>
                                                            </Grid>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsEnabled"
                                                                         Value="False">
                                                                    <Setter Property="Opacity"
                                                                            TargetName="IncreaseRepeat"
                                                                            Value="0.33" />
                                                                    <Setter Property="Opacity"
                                                                            TargetName="DecreaseRepeat"
                                                                            Value="0.33" />
                                                                    <Setter Property="IsEnabled"
                                                                            TargetName="PART_Track"
                                                                            Value="False" />
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Custom:SurfaceScrollBar.Style>
                            </Custom:SurfaceScrollBar>
                            <Custom:SurfaceScrollBar x:Name="PART_VerticalScrollBar"
                                                     AutomationProperties.AutomationId="VerticalScrollBar"
                                                     Grid.Column="1"
                                                     Foreground="{x:Null}"
                                                     HorizontalAlignment="Stretch"
                                                     HorizontalContentAlignment="Stretch"
                                                     ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                     IsEnabled="True"
                                                     LargeChange="1"
                                                     Maximum="{TemplateBinding ScrollableHeight}"
                                                     Minimum="0"
                                                     Orientation="Vertical"
                                                     Grid.Row="0"
                                                     Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                                     Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                     ViewportSize="{TemplateBinding ViewportHeight}"
                                                     VerticalContentAlignment="Stretch"
                                                     Width="Auto">
                                <Custom:SurfaceScrollBar.Style>
                                    <Style TargetType="{x:Type Custom:SurfaceScrollBar}">
                                        <Style.Resources>
                                            <system:Double x:Key="{x:Static SystemParameters.VerticalScrollBarButtonHeightKey}">38</system:Double>
                                            <system:Double x:Key="{x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}">38</system:Double>
                                        </Style.Resources>
                                        <Setter Property="Stylus.IsPressAndHoldEnabled"
                                                Value="False" />
                                        <Setter Property="Stylus.IsFlicksEnabled"
                                                Value="False" />
                                        <Setter Property="Width"
                                                Value="38" />
                                        <Setter Property="Height"
                                                Value="Auto" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type Custom:SurfaceScrollBar}">
                                                    <Grid x:Name="GridRoot"
                                                          Background="{TemplateBinding Background}">
                                                        <Border x:Name="Track"
                                                                HorizontalAlignment="Stretch"
                                                                VerticalAlignment="Stretch">
                                                            <Track x:Name="PART_Track"
                                                                   IsDirectionReversed="True">
                                                                <Track.DecreaseRepeatButton>
                                                                    <Custom:SurfaceRepeatButton x:Name="DecreaseRepeat"
                                                                                                Background="{TemplateBinding Background}"
                                                                                                Command="ScrollBar.PageUpCommand"
                                                                                                HorizontalAlignment="Center">
                                                                        <Custom:SurfaceRepeatButton.Style>
                                                                            <Style TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                <Setter Property="Interval"
                                                                                        Value="150" />
                                                                                <Setter Property="BorderBrush"
                                                                                        Value="{x:Null}" />
                                                                                <Setter Property="Background"
                                                                                        Value="Transparent" />
                                                                                <Setter Property="OverridesDefaultStyle"
                                                                                        Value="True" />
                                                                                <Setter Property="Focusable"
                                                                                        Value="False" />
                                                                                <Setter Property="IsTabStop"
                                                                                        Value="False" />
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                            <Grid Background="{TemplateBinding Background}"
                                                                                                  Width="40">
                                                                                                <Rectangle x:Name="Line"
                                                                                                           Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                           HorizontalAlignment="Center"
                                                                                                           MinWidth="2" />
                                                                                            </Grid>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <Trigger Property="IsEnabled"
                                                                                                         Value="False">
                                                                                                    <Setter Property="Fill"
                                                                                                            TargetName="Line"
                                                                                                            Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </Custom:SurfaceRepeatButton.Style>
                                                                    </Custom:SurfaceRepeatButton>
                                                                </Track.DecreaseRepeatButton>
                                                                <Track.IncreaseRepeatButton>
                                                                    <Custom:SurfaceRepeatButton x:Name="IncreaseRepeat"
                                                                                                Background="{TemplateBinding Background}"
                                                                                                Command="ScrollBar.PageDownCommand"
                                                                                                HorizontalAlignment="Center">
                                                                        <Custom:SurfaceRepeatButton.Style>
                                                                            <Style TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                <Setter Property="Interval"
                                                                                        Value="150" />
                                                                                <Setter Property="BorderBrush"
                                                                                        Value="{x:Null}" />
                                                                                <Setter Property="Background"
                                                                                        Value="Transparent" />
                                                                                <Setter Property="OverridesDefaultStyle"
                                                                                        Value="True" />
                                                                                <Setter Property="Focusable"
                                                                                        Value="False" />
                                                                                <Setter Property="IsTabStop"
                                                                                        Value="False" />
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                            <Grid Background="{TemplateBinding Background}"
                                                                                                  Width="40">
                                                                                                <Rectangle x:Name="Line"
                                                                                                           Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                           HorizontalAlignment="Center"
                                                                                                           MinWidth="2" />
                                                                                            </Grid>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <Trigger Property="IsEnabled"
                                                                                                         Value="False">
                                                                                                    <Setter Property="Fill"
                                                                                                            TargetName="Line"
                                                                                                            Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                            </Style>
                                                                        </Custom:SurfaceRepeatButton.Style>
                                                                    </Custom:SurfaceRepeatButton>
                                                                </Track.IncreaseRepeatButton>
                                                                <Track.Thumb>
                                                                    <Custom:SurfaceThumb x:Name="Thumb"
                                                                                         Background="{TemplateBinding Background}"
                                                                                         HorizontalAlignment="Center"
                                                                                         Template="{DynamicResource SurfaceThumbControlTemplate1}">
                                                                        <Custom:SurfaceThumb.Style>
                                                                            <Style TargetType="{x:Type Custom:SurfaceThumb}">
                                                                                <Setter Property="Template">
                                                                                    <Setter.Value>
                                                                                        <ControlTemplate TargetType="{x:Type Custom:SurfaceThumb}">
                                                                                            <ControlTemplate.Resources>
                                                                                                <Storyboard x:Key="Touch">
                                                                                                    <DoubleAnimation Duration="0:0:0.05"
                                                                                                                     To="16"
                                                                                                                     Storyboard.TargetProperty="Width"
                                                                                                                     Storyboard.TargetName="Thumb" />
                                                                                                    <ThicknessAnimation Duration="0:0:0.05"
                                                                                                                        To="-1,0"
                                                                                                                        Storyboard.TargetProperty="Margin"
                                                                                                                        Storyboard.TargetName="Thumb" />
                                                                                                </Storyboard>
                                                                                                <Storyboard x:Key="Release">
                                                                                                    <DoubleAnimation Duration="0:0:0.1"
                                                                                                                     To="14"
                                                                                                                     Storyboard.TargetProperty="Width"
                                                                                                                     Storyboard.TargetName="Thumb" />
                                                                                                    <ThicknessAnimation Duration="0:0:0.1"
                                                                                                                        To="0"
                                                                                                                        Storyboard.TargetProperty="Margin"
                                                                                                                        Storyboard.TargetName="Thumb" />
                                                                                                </Storyboard>
                                                                                            </ControlTemplate.Resources>
                                                                                            <Grid x:Name="Grid"
                                                                                                  Background="{TemplateBinding Background}"
                                                                                                  SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                                                                                                <Rectangle x:Name="Thumb"
                                                                                                           Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                           HorizontalAlignment="Stretch"
                                                                                                           Height="Auto"
                                                                                                           VerticalAlignment="Stretch"
                                                                                                           Width="14" />
                                                                                            </Grid>
                                                                                            <ControlTemplate.Triggers>
                                                                                                <Trigger Property="Custom:TouchExtensions.AreAnyInputDevicesCapturedWithin"
                                                                                                         Value="True">
                                                                                                    <Trigger.EnterActions>
                                                                                                        <BeginStoryboard>
                                                                                                            <Storyboard>
                                                                                                                <DoubleAnimation Duration="0:0:0.05"
                                                                                                                                 To="16"
                                                                                                                                 Storyboard.TargetProperty="Width"
                                                                                                                                 Storyboard.TargetName="Thumb" />
                                                                                                                <ThicknessAnimation Duration="0:0:0.05"
                                                                                                                                    To="-1,0"
                                                                                                                                    Storyboard.TargetProperty="Margin"
                                                                                                                                    Storyboard.TargetName="Thumb" />
                                                                                                            </Storyboard>
                                                                                                        </BeginStoryboard>
                                                                                                    </Trigger.EnterActions>
                                                                                                    <Trigger.ExitActions>
                                                                                                        <BeginStoryboard>
                                                                                                            <Storyboard>
                                                                                                                <DoubleAnimation Duration="0:0:0.1"
                                                                                                                                 To="14"
                                                                                                                                 Storyboard.TargetProperty="Width"
                                                                                                                                 Storyboard.TargetName="Thumb" />
                                                                                                                <ThicknessAnimation Duration="0:0:0.1"
                                                                                                                                    To="0"
                                                                                                                                    Storyboard.TargetProperty="Margin"
                                                                                                                                    Storyboard.TargetName="Thumb" />
                                                                                                            </Storyboard>
                                                                                                        </BeginStoryboard>
                                                                                                    </Trigger.ExitActions>
                                                                                                </Trigger>
                                                                                                <Trigger Property="IsEnabled"
                                                                                                         Value="False">
                                                                                                    <Setter Property="Fill"
                                                                                                            TargetName="Thumb"
                                                                                                            Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                </Trigger>
                                                                                            </ControlTemplate.Triggers>
                                                                                        </ControlTemplate>
                                                                                    </Setter.Value>
                                                                                </Setter>
                                                                                <Style.BasedOn>
                                                                                    <Style TargetType="{x:Type Control}">
                                                                                        <Setter Property="SnapsToDevicePixels"
                                                                                                Value="False" />
                                                                                        <Setter Property="Background"
                                                                                                Value="Transparent" />
                                                                                        <Setter Property="IsTabStop"
                                                                                                Value="False" />
                                                                                        <Setter Property="Focusable"
                                                                                                Value="False" />
                                                                                        <Setter Property="FocusVisualStyle"
                                                                                                Value="{x:Null}" />
                                                                                        <Setter Property="MinWidth"
                                                                                                Value="40" />
                                                                                        <Setter Property="MinHeight"
                                                                                                Value="40" />
                                                                                    </Style>
                                                                                </Style.BasedOn>
                                                                            </Style>
                                                                        </Custom:SurfaceThumb.Style>
                                                                    </Custom:SurfaceThumb>
                                                                </Track.Thumb>
                                                            </Track>
                                                        </Border>
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsEnabled"
                                                                 Value="False">
                                                            <Setter Property="IsEnabled"
                                                                    TargetName="PART_Track"
                                                                    Value="False" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                        <Style.BasedOn>
                                            <Style TargetType="{x:Type Control}">
                                                <Setter Property="SnapsToDevicePixels"
                                                        Value="False" />
                                                <Setter Property="Background"
                                                        Value="Transparent" />
                                                <Setter Property="IsTabStop"
                                                        Value="False" />
                                                <Setter Property="Focusable"
                                                        Value="False" />
                                                <Setter Property="FocusVisualStyle"
                                                        Value="{x:Null}" />
                                                <Setter Property="MinWidth"
                                                        Value="40" />
                                                <Setter Property="MinHeight"
                                                        Value="40" />
                                            </Style>
                                        </Style.BasedOn>
                                        <Style.Triggers>
                                            <Trigger Property="Orientation"
                                                     Value="Horizontal">
                                                <Setter Property="Width"
                                                        Value="Auto" />
                                                <Setter Property="Height"
                                                        Value="38" />
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="{x:Type Custom:SurfaceScrollBar}">
                                                            <Grid x:Name="GridRoot"
                                                                  Background="{TemplateBinding Background}">
                                                                <Border x:Name="Track"
                                                                        HorizontalAlignment="Stretch"
                                                                        VerticalAlignment="Stretch">
                                                                    <Track x:Name="PART_Track">
                                                                        <Track.DecreaseRepeatButton>
                                                                            <Custom:SurfaceRepeatButton x:Name="DecreaseRepeat"
                                                                                                        Background="{TemplateBinding Background}"
                                                                                                        Command="ScrollBar.PageLeftCommand"
                                                                                                        VerticalAlignment="Center">
                                                                                <Custom:SurfaceRepeatButton.Style>
                                                                                    <Style TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                        <Setter Property="Interval"
                                                                                                Value="150" />
                                                                                        <Setter Property="BorderBrush"
                                                                                                Value="{x:Null}" />
                                                                                        <Setter Property="Background"
                                                                                                Value="Transparent" />
                                                                                        <Setter Property="OverridesDefaultStyle"
                                                                                                Value="True" />
                                                                                        <Setter Property="Focusable"
                                                                                                Value="False" />
                                                                                        <Setter Property="IsTabStop"
                                                                                                Value="False" />
                                                                                        <Setter Property="Template">
                                                                                            <Setter.Value>
                                                                                                <ControlTemplate TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                                    <Grid Background="{TemplateBinding Background}"
                                                                                                          Height="40">
                                                                                                        <Rectangle x:Name="Line"
                                                                                                                   Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                                   MinHeight="2"
                                                                                                                   VerticalAlignment="Center" />
                                                                                                    </Grid>
                                                                                                    <ControlTemplate.Triggers>
                                                                                                        <Trigger Property="IsEnabled"
                                                                                                                 Value="False">
                                                                                                            <Setter Property="Fill"
                                                                                                                    TargetName="Line"
                                                                                                                    Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                        </Trigger>
                                                                                                    </ControlTemplate.Triggers>
                                                                                                </ControlTemplate>
                                                                                            </Setter.Value>
                                                                                        </Setter>
                                                                                    </Style>
                                                                                </Custom:SurfaceRepeatButton.Style>
                                                                            </Custom:SurfaceRepeatButton>
                                                                        </Track.DecreaseRepeatButton>
                                                                        <Track.IncreaseRepeatButton>
                                                                            <Custom:SurfaceRepeatButton x:Name="IncreaseRepeat"
                                                                                                        Background="{TemplateBinding Background}"
                                                                                                        Command="ScrollBar.PageRightCommand"
                                                                                                        VerticalAlignment="Center">
                                                                                <Custom:SurfaceRepeatButton.Style>
                                                                                    <Style TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                        <Setter Property="Interval"
                                                                                                Value="150" />
                                                                                        <Setter Property="BorderBrush"
                                                                                                Value="{x:Null}" />
                                                                                        <Setter Property="Background"
                                                                                                Value="Transparent" />
                                                                                        <Setter Property="OverridesDefaultStyle"
                                                                                                Value="True" />
                                                                                        <Setter Property="Focusable"
                                                                                                Value="False" />
                                                                                        <Setter Property="IsTabStop"
                                                                                                Value="False" />
                                                                                        <Setter Property="Template">
                                                                                            <Setter.Value>
                                                                                                <ControlTemplate TargetType="{x:Type Custom:SurfaceRepeatButton}">
                                                                                                    <Grid Background="{TemplateBinding Background}"
                                                                                                          Height="40">
                                                                                                        <Rectangle x:Name="Line"
                                                                                                                   Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                                   MinHeight="2"
                                                                                                                   VerticalAlignment="Center" />
                                                                                                    </Grid>
                                                                                                    <ControlTemplate.Triggers>
                                                                                                        <Trigger Property="IsEnabled"
                                                                                                                 Value="False">
                                                                                                            <Setter Property="Fill"
                                                                                                                    TargetName="Line"
                                                                                                                    Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                        </Trigger>
                                                                                                    </ControlTemplate.Triggers>
                                                                                                </ControlTemplate>
                                                                                            </Setter.Value>
                                                                                        </Setter>
                                                                                    </Style>
                                                                                </Custom:SurfaceRepeatButton.Style>
                                                                            </Custom:SurfaceRepeatButton>
                                                                        </Track.IncreaseRepeatButton>
                                                                        <Track.Thumb>
                                                                            <Custom:SurfaceThumb x:Name="Thumb"
                                                                                                 Background="{TemplateBinding Background}"
                                                                                                 VerticalAlignment="Center">
                                                                                <Custom:SurfaceThumb.Style>
                                                                                    <Style TargetType="{x:Type Custom:SurfaceThumb}">
                                                                                        <Setter Property="Template">
                                                                                            <Setter.Value>
                                                                                                <ControlTemplate TargetType="{x:Type Custom:SurfaceThumb}">
                                                                                                    <ControlTemplate.Resources>
                                                                                                        <Storyboard x:Key="Touch">
                                                                                                            <DoubleAnimation Duration="0:0:0.05"
                                                                                                                             To="16"
                                                                                                                             Storyboard.TargetProperty="Height"
                                                                                                                             Storyboard.TargetName="Thumb" />
                                                                                                            <ThicknessAnimation Duration="0:0:0.05"
                                                                                                                                To="0,-1"
                                                                                                                                Storyboard.TargetProperty="Margin"
                                                                                                                                Storyboard.TargetName="Thumb" />
                                                                                                        </Storyboard>
                                                                                                        <Storyboard x:Key="Release">
                                                                                                            <DoubleAnimation Duration="0:0:0.1"
                                                                                                                             To="14"
                                                                                                                             Storyboard.TargetProperty="Height"
                                                                                                                             Storyboard.TargetName="Thumb" />
                                                                                                            <ThicknessAnimation Duration="0:0:0.1"
                                                                                                                                To="0"
                                                                                                                                Storyboard.TargetProperty="Margin"
                                                                                                                                Storyboard.TargetName="Thumb" />
                                                                                                        </Storyboard>
                                                                                                    </ControlTemplate.Resources>
                                                                                                    <Grid x:Name="Grid"
                                                                                                          Background="{TemplateBinding Background}"
                                                                                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                                                                                                        <Rectangle x:Name="Thumb"
                                                                                                                   Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                                                                                                                   HorizontalAlignment="Stretch"
                                                                                                                   Height="14"
                                                                                                                   VerticalAlignment="Stretch"
                                                                                                                   Width="Auto" />
                                                                                                    </Grid>
                                                                                                    <ControlTemplate.Triggers>
                                                                                                        <Trigger Property="Custom:TouchExtensions.AreAnyInputDevicesCapturedWithin"
                                                                                                                 Value="True">
                                                                                                            <Trigger.EnterActions>
                                                                                                                <BeginStoryboard>
                                                                                                                    <Storyboard>
                                                                                                                        <DoubleAnimation Duration="0:0:0.05"
                                                                                                                                         To="16"
                                                                                                                                         Storyboard.TargetProperty="Height"
                                                                                                                                         Storyboard.TargetName="Thumb" />
                                                                                                                        <ThicknessAnimation Duration="0:0:0.05"
                                                                                                                                            To="0,-1"
                                                                                                                                            Storyboard.TargetProperty="Margin"
                                                                                                                                            Storyboard.TargetName="Thumb" />
                                                                                                                    </Storyboard>
                                                                                                                </BeginStoryboard>
                                                                                                            </Trigger.EnterActions>
                                                                                                            <Trigger.ExitActions>
                                                                                                                <BeginStoryboard>
                                                                                                                    <Storyboard>
                                                                                                                        <DoubleAnimation Duration="0:0:0.1"
                                                                                                                                         To="14"
                                                                                                                                         Storyboard.TargetProperty="Height"
                                                                                                                                         Storyboard.TargetName="Thumb" />
                                                                                                                        <ThicknessAnimation Duration="0:0:0.1"
                                                                                                                                            To="0"
                                                                                                                                            Storyboard.TargetProperty="Margin"
                                                                                                                                            Storyboard.TargetName="Thumb" />
                                                                                                                    </Storyboard>
                                                                                                                </BeginStoryboard>
                                                                                                            </Trigger.ExitActions>
                                                                                                        </Trigger>
                                                                                                        <Trigger Property="IsEnabled"
                                                                                                                 Value="False">
                                                                                                            <Setter Property="Fill"
                                                                                                                    TargetName="Thumb"
                                                                                                                    Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                                                                                                        </Trigger>
                                                                                                    </ControlTemplate.Triggers>
                                                                                                </ControlTemplate>
                                                                                            </Setter.Value>
                                                                                        </Setter>
                                                                                        <Style.BasedOn>
                                                                                            <Style TargetType="{x:Type Control}">
                                                                                                <Setter Property="SnapsToDevicePixels"
                                                                                                        Value="False" />
                                                                                                <Setter Property="Background"
                                                                                                        Value="Transparent" />
                                                                                                <Setter Property="IsTabStop"
                                                                                                        Value="False" />
                                                                                                <Setter Property="Focusable"
                                                                                                        Value="False" />
                                                                                                <Setter Property="FocusVisualStyle"
                                                                                                        Value="{x:Null}" />
                                                                                                <Setter Property="MinWidth"
                                                                                                        Value="40" />
                                                                                                <Setter Property="MinHeight"
                                                                                                        Value="40" />
                                                                                            </Style>
                                                                                        </Style.BasedOn>
                                                                                    </Style>
                                                                                </Custom:SurfaceThumb.Style>
                                                                            </Custom:SurfaceThumb>
                                                                        </Track.Thumb>
                                                                    </Track>
                                                                </Border>
                                                            </Grid>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsEnabled"
                                                                         Value="False">
                                                                    <Setter Property="Opacity"
                                                                            TargetName="IncreaseRepeat"
                                                                            Value="0.33" />
                                                                    <Setter Property="Opacity"
                                                                            TargetName="DecreaseRepeat"
                                                                            Value="0.33" />
                                                                    <Setter Property="IsEnabled"
                                                                            TargetName="PART_Track"
                                                                            Value="False" />
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Custom:SurfaceScrollBar.Style>
                            </Custom:SurfaceScrollBar>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled"
                                     Value="False">
                                <Setter Property="IsEnabled"
                                        TargetName="PART_HorizontalScrollBar"
                                        Value="False" />
                                <Setter Property="IsEnabled"
                                        TargetName="PART_VerticalScrollBar"
                                        Value="False" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <ControlTemplate x:Key="SurfaceThumbControlTemplate1"
                         TargetType="{x:Type Custom:SurfaceThumb}">
            <ControlTemplate.Resources>
                <Storyboard x:Key="Touch">
                    <DoubleAnimation Duration="0:0:0.05"
                                     To="16"
                                     Storyboard.TargetProperty="Width"
                                     Storyboard.TargetName="Thumb" />
                    <ThicknessAnimation Duration="0:0:0.05"
                                        To="-1,0"
                                        Storyboard.TargetProperty="Margin"
                                        Storyboard.TargetName="Thumb" />
                </Storyboard>
                <Storyboard x:Key="Release">
                    <DoubleAnimation Duration="0:0:0.1"
                                     To="14"
                                     Storyboard.TargetProperty="Width"
                                     Storyboard.TargetName="Thumb" />
                    <ThicknessAnimation Duration="0:0:0.1"
                                        To="0"
                                        Storyboard.TargetProperty="Margin"
                                        Storyboard.TargetName="Thumb" />
                </Storyboard>
            </ControlTemplate.Resources>
            <Grid x:Name="Grid"
                  Background="#EEEEEEEE"
                  SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                <Rectangle x:Name="Thumb"
                           Fill="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}"
                           HorizontalAlignment="Stretch"
                           Height="Auto"
                           VerticalAlignment="Stretch"
                           Width="14" />
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="Custom:TouchExtensions.AreAnyInputDevicesCapturedWithin"
                         Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0.05"
                                                 To="16"
                                                 Storyboard.TargetProperty="Width"
                                                 Storyboard.TargetName="Thumb" />
                                <ThicknessAnimation Duration="0:0:0.05"
                                                    To="-1,0"
                                                    Storyboard.TargetProperty="Margin"
                                                    Storyboard.TargetName="Thumb" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Duration="0:0:0.1"
                                                 To="14"
                                                 Storyboard.TargetProperty="Width"
                                                 Storyboard.TargetName="Thumb" />
                                <ThicknessAnimation Duration="0:0:0.1"
                                                    To="0"
                                                    Storyboard.TargetProperty="Margin"
                                                    Storyboard.TargetName="Thumb" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
                <Trigger Property="IsEnabled"
                         Value="False">
                    <Setter Property="Fill"
                            TargetName="Thumb"
                            Value="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type Custom:SurfaceColors}}}" />
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ItemsPanelTemplate x:Key="MediaPanel">
            <StackPanel IsItemsHost="True"
                        Orientation="Horizontal" />
        </ItemsPanelTemplate>
        <DataTemplate x:Key="MediaTemplate">
            <Grid x:Name="gMediaItem">
                <views:MediaItem Media="{Binding}" />
            </Grid>
        </DataTemplate>

        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"></BooleanToVisibilityConverter>

    </UserControl.Resources>

    <Grid MinWidth="300">
        <StackPanel>
            <pivotControl1:PivotControl x:Name="Sections"
                                        Margin="0"
                                        SelectedIndex="0"
                                        HorizontalContentAlignment="Stretch"
                                        Foreground="{Binding Foreground}"
                                        Background="{x:Null}"
                                        HorizontalAlignment="Stretch"
                                        ContentTemplate="{StaticResource DefaultDataTemplate}"
                                        Style="{DynamicResource PivotControlStyle1}">

                <!--<pivotControl1:PivotControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding DisplayName}"
                                   TextTrimming="CharacterEllipsis"
                                   MaxWidth="{Binding ActualWidth, ConverterParameter=100, Converter={wpfConverters:SubtractConverter}, ElementName=Labels}" />
                    </DataTemplate>
                </pivotControl1:PivotControl.ItemTemplate>-->
            </pivotControl1:PivotControl>
           
            <ItemsControl Height="100"
                          VerticalAlignment="Top"
                          ItemsSource="{Binding Poi.AllMedia}"
                          ItemsPanel="{DynamicResource MediaPanel}"
                          HorizontalContentAlignment="Stretch"
                          ItemTemplate="{DynamicResource MediaTemplate}"
                          Visibility="{Binding Poi.HasMedia, Converter={StaticResource BooleanToVisibilityConverter}}" />
            
        </StackPanel>
    </Grid>
</UserControl>
